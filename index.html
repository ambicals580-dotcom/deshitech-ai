<!DOCTYPE html>
<html>
<head>
<title>DESHITECH AI</title>
<style>
body { background:#0f172a; color:white; font-family:Arial; text-align:center }
input,button { padding:10px; margin:5px }
</style>
</head>
<body>

<h1>DESHITECH AI</h1>
<p>Owner: VISHIST AMBASTHA</p>

<div id="login">
  <input id="user" placeholder="Username">
  <button onclick="login()">Login</button>
</div>

<div id="chat" style="display:none">
  <input id="msg" placeholder="Ask anything">
  <button onclick="send()">Send</button>
  <div id="out"></div>
</div>

<script>
let token="";

async function login(){
  let u=document.getElementById("user").value;
  let r=await fetch("/login",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({username:u})});
  let d=await r.json();
  token=d.token;
  document.getElementById("login").style.display="none";
  document.getElementById("chat").style.display="block";
}

async function send(){
  let m=document.getElementById("msg").value;
  let r=await fetch("/chat",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({message:m,token:token})});
  let d=await r.json();
  if(d.image) document.getElementById("out").innerHTML+=`<img src="${d.image}" width="250">`;
  if(d.reply) document.getElementById("out").innerHTML+=`<p>${d.reply}</p>`;
}
</script>

</body>
</html>